global:
  spec:
    description: Tool for examining and modifying ROMs
  flags: !omap
    -v|--verbose: Verbose output
    --debug: Print debug information
    --pdb: Start interactive debugger on crash

dump:
  spec:
    description: Dump all known data to tsv files.
  args: !omap
    rom: ROM file to dump from
    datafolder: Send output to this folder
  opts: !omap
    -m|--map: Specify ROM map instead of autodetecting
    -p|--patch: Include ips patch data in dump
    -s|--save: Include save file in dump
  flags: !omap
    -f|--force: Overwrite existing destination files

build:
  spec:
    description: Construct patch from modified files.
  args: !omap
    moddir: Directory containing mod data.
  opts: !omap
    -s|--source: Filter patch against source file, removing no-ops
    -m|--map: Specify ROM map instead of autodetecting.
    -o|--out: Patch file to write. Detects format by extension.
  flags: !omap
    --save: Create save-file patch instead of ROM patch

merge:
  spec:
    description: Merge multiple patches together.
  args+: !omap
    patches: List of patches to merge.
  opts: !omap
    -r|--rom: Filter against a ROM, removing no-op changes.
    -o|--out: Patch file to write. Detects format by extension.

convert:
  spec:
    description: Convert a patch from one format to another
  args: !omap
    infile: File to convert
    outfile: File to create

diff:
  spec:
    description: Diff two files and generate a patch between the two
  args: !omap
    original: Original ROM
    modified: Modified ROM
  opts:
    -o|--out: Patch file to write. Detects format by extension.

apply:
  spec:
    description: Apply a patch.
  args: !omap
    patch: Patch file
    target: Patch target
  flags:
    --nobackup: Don''t make a backup.

sanitize:
  spec:
    description: Sanitize a ROM or save file with checksums etc
  args: !omap
    target: Target file
  opts: !omap
    -m|--map: Specify ROM map.
    -t|--type: Specify rom/save file if extension doesn''t say.
  flags:
    --nobackup: Don''t make a backup.

charmap:
  spec:
    description: Generate a text character set
  args: !omap
    rom: ROM file
    strings: Known strings

blocks:
  spec:
    description: Search for blocks of unused space
  args: !omap
    rom: ROM file
  opts:
    -b|--byte: Search for blocks of a specific byte
    -m|--min: Minimum block size to bother with
    -n|--num: Print only the N largest blocks   # Because windows has no head.
